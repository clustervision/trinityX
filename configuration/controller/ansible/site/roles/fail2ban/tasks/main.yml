---
# tasks file for fail2ban

- name: Install fail2ban packages
  yum:
    name: '{{ item }}'
    state: present
  with_items: '{{ fail2ban_packages }}'
  tags: fail2ban

- name: Update fail2ban configuration file
  copy:
    src: 'trinityx.conf'
    dest: '/etc/fail2ban/jail.d/trinityx.conf'
  tags: fail2ban

- name: Enable fail2ban service
  service:
    name: fail2ban
    enabled: yes
  tags: fail2ban

- name: Restart fail2ban service
  service:
    name: fail2ban
    state: restarted
  tags: fail2ban
